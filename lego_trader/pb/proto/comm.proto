syntax = "proto3";
option go_package = ".;pb";
import "errorcode.proto";
import "google/protobuf/any.proto";

message ErrorData {
  ErrorCode Code = 1;
  string Message = 2;
}

//集合包
message MessagePackage {
  repeated SocketMessage messages = 1;
}

//用户消息流结构1
message SocketMessage {
  string MsgName = 1;   //消息名称
  string ServicePath = 2;     // 消息路由地址 部分消息前端确定转发给谁 \worker\worker0
  google.protobuf.Any data = 3;
  string sec = 4; //密文
}

//网关Http 路由请求
message Rpc_GatewayHttpRouteReq {
  string MsgName = 1;
  string Meta = 2;
  bytes Message = 3;
}

message Rpc_GatewayHttpRouteResp {
  string ContentType = 1;
  bytes Body = 2;
}


message Rpc_GatewayRouteReq {
  string MsgName = 1;
  string Meta = 2;
  google.protobuf.Any Message = 3;
}

message Rpc_GatewayRouteResp  {
	string ServicePath =1;       
	ErrorData  ErrorData =2;  
	repeated SocketMessage Reply =3;
}



// RPC向用户代理发送消息
message Rpc_GatewaySendMsgToAgentReq  {
	string UserSessionId = 1;         //用户会话ID
	repeated SocketMessage Reply =2; //回复消息
}

message Rpc_GatewaySendMsgToAgentResp  {
  ErrorData ErrorData = 1; //错误信息
}

message Rpc_GatewaySendMsgsToAgentsReq  {
  repeated string UserSessionIds = 1; //用户会话ID列表
  repeated SocketMessage Reply =2; //回复消息
}

message Rpc_GatewaySendMsgsToAgentsResp  {
  ErrorData ErrorData = 1; //错误信息
}

message Rpc_GatewaySendMsgsToAllAgentsReq  {
  repeated SocketMessage Reply =2; //回复消息
}
message Rpc_GatewaySendMsgsToAllAgentsResp  {
  ErrorData ErrorData = 1; //错误信息
}

message Rpc_GatewayCloseAgentsReq  {
  repeated string UserSessionIds = 1; //用户会话ID列表
}

message Rpc_GatewayCloseAgentsResp  {
  ErrorData ErrorData = 1; //错误信息
}